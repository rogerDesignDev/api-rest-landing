const api=axios.create({baseURL:"https://api.thecatapi.com/v1"});api.defaults.headers.common["X-API-KEY"]="b17def75-2cc5-400a-9ce0-f101efce2335";const spamError=document.getElementById("error");async function loadRandomCats(){const{data:e,status:t}=await api.get("/images/search?limit=4");if(console.log(e),200!==t)spamError.innerHTML="Hubo un error: "+t;else{const t=document.getElementById("img1"),a=document.getElementById("img2"),o=document.getElementById("img3"),n=document.getElementById("img4"),s=document.getElementById("btn1"),i=document.getElementById("btn2"),d=document.getElementById("btn3"),c=document.getElementById("btn4");t.src=e[0].url,a.src=e[1].url,o.src=e[2].url,n.src=e[3].url;const r=()=>{s.disabled=!0},l=()=>{i.disabled=!0},u=()=>{d.disabled=!0},m=()=>{c.disabled=!0};s.onclick=(()=>saveFavouriteCats(e[0].id)),s.addEventListener("click",r),i.onclick=(()=>saveFavouriteCats(e[1].id)),i.addEventListener("click",l),d.onclick=(()=>saveFavouriteCats(e[2].id)),d.addEventListener("click",u),c.onclick=(()=>saveFavouriteCats(e[3].id)),c.addEventListener("click",m)}}async function loadFavouritesCats(){const{data:e,status:t}=await api.get("/favourites");if(200!==t)spamError.innerHTML="Hubo un error: "+t+" "+e.message;else{const t=document.getElementById("favoritesList");t.innerHTML="",e.forEach(e=>{const a=document.createElement("article"),o=document.createElement("div"),n=document.createElement("img"),s=document.createElement("button"),i=document.createElement("span"),d=document.createTextNode("Sacar al michi de favoritos"),c=document.createTextNode("âœ–");a.classList.add("cats--favorites-item"),o.classList.add("cats--favorites-inner"),n.src=e.image.url,n.width=323,n.height=256,n.classList.add("cats--favorites-img"),s.appendChild(i),i.appendChild(d),s.appendChild(c),s.onclick=(()=>deleteFavouriteCats(e.id)),s.classList.add("cats--favorites-button"),a.appendChild(o),o.appendChild(n),o.appendChild(s),t.appendChild(a)})}}async function saveFavouriteCats(e){const{data:t,status:a}=await api.post("/favourites",{image_id:e});console.log("Save"),200!==a?spamError.innerHTML="Hubo un error: "+a+" "+t.message:loadFavouritesCats()}async function deleteFavouriteCats(e){const{data:t,status:a}=await api.delete(`/favourites/${e}`);200!==a?spamError.innerHTML="Hubo un error: "+a+" "+t.message:loadFavouritesCats()}const inputImage=document.querySelector("#file"),upload__imgsContainer=document.querySelector(".cats--uploading-img-container");async function uploadCatPhoto(){const e=document.getElementById("uploadingForm"),t=new FormData(e);console.log(t.get("file"));const{data:a,status:o}=await api.post("/images/upload",t);console.log(a),201!==o?spamError.innerHTML="Hubo un error: "+o+" "+a.message:(console.log("Foto de gato subida"),saveFavouriteCats(a.id),upload__imgsContainer.innerHTML=""),console.log(a),console.log(o)}inputImage.addEventListener("change",e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.readAsDataURL(t),e.onload=(e=>{upload__imgsContainer.style.display="block",upload__imgsContainer.innerHTML=`<img src="${e.target.result}" class="cats--uploading-img" alt="Uploaded image" />`})}}),loadRandomCats(),loadFavouritesCats();